<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>SpO2 Comparison Chart</title>
    <!-- dayjs for date formatting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.10.6/dayjs.min.js"></script>
    <!-- echarts for charting -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.3.2/dist/echarts.min.js"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }

      #main {
        width: 100%;
        height: 80vh;
        margin-top: 30px;
      }

      .container {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .controls {
        display: flex;
        flex-direction: row;
        align-items: center;
        flex-wrap: wrap;
        gap: 10px;
      }

      .controls label {
        font-weight: bold;
      }

      .controls select,
      .controls input[type="date"],
      .controls button {
        padding: 5px;
        font-size: 14px;
      }

      .controls button {
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      .controls button:hover {
        background-color: #0056b3;
      }

      .instructions {
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="controls">
        <label for="userSelect">User:</label>
        <select id="userSelect">
          <option value="valid1">valid1</option>
          <option value="valid2">valid2</option>
          <option value="valid3">valid3</option>
          <option value="valid4">valid4</option>
          <option value="valid5">valid5</option>
          <option value="valid6">valid6</option>
          <option value="valid8">valid8</option>
          <option value="valid9">valid9</option>
          <option value="valid10">valid10</option>
          <option value="valid11">valid11</option>
          <option value="valid12">valid12</option>
          <option value="valid13">valid13</option>
          <option value="valid14">valid14</option>
          <option value="valid15">valid15</option>
          <option value="valid16">valid16</option>
          <option value="valid17">valid17</option>
          <option value="valid18">valid18</option>
          <option value="valid19">valid19</option>
          <option value="valid20">valid20</option>
          <option value="valid21">valid21</option>
          <option value="valid22">valid22</option>
          <option value="valid23">valid23</option>
          <option value="valid24">valid24</option>
          <option value="valid25">valid25</option>
          <option value="valid26">valid26</option>
          <option value="valid27">valid27</option>
        </select>

        <label for="dateA">Date A:</label>
        <input type="date" id="dateA" />

        <label for="dateB">Date B:</label>
        <input type="date" id="dateB" />

        <button id="compareBtn">Compare</button>
      </div>

      <div class="instructions">
        <p><b>Instructions:</b> Select a user, two dates, and click "Compare" to see SpO2 and ODI events.</p>
      </div>
    </div>

    <div id="main"></div>

    <script src="main.js"></script>
    <script>
      document.getElementById("dateA").value = "2025-04-03";
      document.getElementById("dateB").value = "2025-04-04";

      document.getElementById("compareBtn").addEventListener("click", function () {
        const dateA = document.getElementById("dateA").value;
        const dateB = document.getElementById("dateB").value;
        const user = document.getElementById("userSelect").value;
        if (dateA && dateB) {
          compareSingleUser(user, dateA, dateB);
        } else {
          alert("Please select both dates.");
        }
      });

      // Initial chart on page load
      compareSingleUser(document.getElementById("userSelect").value, yesterday, today);
    </script>
  </body>
</html>
